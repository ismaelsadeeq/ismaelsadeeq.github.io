<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Managing Multiple Projects with Git Worktrees | Abubakar Sadiq Ismail </title> <meta name="author" content="Abubakar Sadiq Ismail"> <meta name="description" content="A guide to using Git worktrees for managing multiple branches and tasks simultaneously."> <meta name="keywords" content="Abubakar Sadiq Ismail"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/prof_pic.jpeg?4400b4ff2c19f26df087ca783d4c892b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ismaelsadeeq.github.io/blog/2026/managing-multiple-projects-with-git-worktrees/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Abubakar</span> Sadiq Ismail </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/books/">bookshelf </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Managing Multiple Projects with Git Worktrees</h1> <p class="post-meta"> Created on January 30, 2026 </p> <p class="post-tags"> <a href="/blog/2026"> <i class="fa-solid fa-calendar fa-sm"></i> 2026 </a>   ·   <a href="/blog/tag/git"> <i class="fa-solid fa-hashtag fa-sm"></i> git</a>   <a href="/blog/tag/productivity"> <i class="fa-solid fa-hashtag fa-sm"></i> productivity</a>   <a href="/blog/tag/workflow"> <i class="fa-solid fa-hashtag fa-sm"></i> workflow</a>   ·   <a href="/blog/category/technical"> <i class="fa-solid fa-tag fa-sm"></i> technical</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Git worktrees are a powerful feature that allows developers to work on multiple branches simultaneously within a single repository. Instead of constantly switching branches and dealing with uncommitted changes, worktrees provide isolated working directories for each branch or task.</p> <h4 id="the-problem-with-manual-branch-checkouts">The Problem with Manual Branch Checkouts</h4> <p>When working on multiple features or bug fixes, developers often encounter a common scenario: you’re in the middle of implementing a feature with uncommitted changes when you need to switch to another branch. Traditional Git workflows offer two main solutions, each with drawbacks:</p> <ul> <li> <strong>Creating WIP commits:</strong> While this preserves your work, you must recompile the entire codebase when switching branches. Additionally, you need to either amend commits or perform soft resets when returning to your work, cluttering your Git history.</li> <li> <strong>Using git stash:</strong> Stashing becomes problematic when managing multiple stashes. You must remember stash indices or inspect each stash before applying it, often leading to applying the wrong stash to the wrong branch.</li> </ul> <p>Both approaches share another significant limitation: each time you switch branches and recompile, you lose access to the previous branch’s compiled binaries, making it impossible to run experiments across different projects’ binaries without manually saving binaries.</p> <h4 id="how-git-worktrees-solve-these-problems">How Git Worktrees Solve These Problems</h4> <p>Git worktrees eliminate these pain points by creating separate working directories for each feature. Instead of switching branches within a single directory, you organise your work into multiple directories, each containing a different branch.</p> <p>For example, instead of constantly switching between branches in a single directory, you might organise your repository like this:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bitcoin-core/
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bitcoin-core/bitcoin/              (main branch)
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bitcoin-core/fee-estimation/       (feature branch)
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bitcoin-core/block-template-cache/ (feature branch)
</code></pre></div></div> <p>Each directory operates independently with its own working tree, staged changes, and compiled binaries. You can open your editor in any directory and work without affecting the others.</p> <h4 id="creating-a-new-worktree">Creating a New Worktree</h4> <p>Creating a worktree is straightforward. From your main repository, use the <code class="language-plaintext highlighter-rouge">git worktree add</code> command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git worktree add ../scaling-btc
</code></pre></div></div> <p>This creates a new directory at the specified path with a clean checkout of your repository. You can now navigate to that directory and work independently:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../scaling-btc
nvim <span class="nb">.</span>
</code></pre></div></div> <p>When you need to switch contexts, simply navigate to a different worktree directory. No recompilation needed, no stash management required.</p> <h4 id="handling-untracked-files">Handling Untracked Files</h4> <p>One limitation of worktrees is that they only include Git-tracked files. Configuration files, build scripts, and environment files that aren’t tracked by Git won’t be copied to new worktrees. However, this is easily solved with a post-checkout hook.</p> <p>A post-checkout hook is a Git script that runs automatically after checking out a branch. You can use it to copy necessary files from your main repository to new worktrees.</p> <h4 id="setting-up-a-post-checkout-hook">Setting Up a Post-Checkout Hook</h4> <p>Create the hook file at <code class="language-plaintext highlighter-rouge">.git/hooks/post-checkout</code> in your main repository:</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td> <td class="code"><pre><span class="c">#!/usr/bin/env bash</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"0000000000000000000000000000000000000000"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">main_git_dir</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--git-common-dir</span><span class="si">)</span>
    <span class="nv">main_work_tree</span><span class="o">=</span><span class="si">$(</span><span class="nb">dirname</span> <span class="s2">"</span><span class="nv">$main_git_dir</span><span class="s2">"</span><span class="si">)</span>
    <span class="nv">work_tree</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--show-toplevel</span><span class="si">)</span>
    
    <span class="nb">cp</span> <span class="s2">"</span><span class="nv">$main_work_tree</span><span class="s2">/.envrc"</span> <span class="s2">"</span><span class="nv">$work_tree</span><span class="s2">/.envrc"</span>
    <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$work_tree</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> direnv allow
    
    <span class="nb">cp</span> <span class="s2">"</span><span class="nv">$main_work_tree</span><span class="s2">/build_and_test.sh"</span> <span class="s2">"</span><span class="nv">$work_tree</span><span class="s2">/build_and_test.sh"</span>
    <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$work_tree</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">chmod</span> +x build_and_test.sh
    
    <span class="nb">cp</span> <span class="s2">"</span><span class="nv">$main_work_tree</span><span class="s2">/.env"</span> <span class="s2">"</span><span class="nv">$work_tree</span><span class="s2">/.env"</span>
    
    <span class="nb">echo</span> <span class="s2">"worktree setup completed"</span>
<span class="k">fi</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>This script does the following:</p> <ol> <li>Detects when a new worktree is being created by checking for the special commit hash.</li> <li>Identifies the main repository directory using <code class="language-plaintext highlighter-rouge">git rev-parse --git-common-dir</code>.</li> <li>Copies necessary files from the main repository to the new worktree.</li> <li>Makes build scripts executable.</li> </ol> <p>Make the hook executable:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x .git/hooks/post-checkout
</code></pre></div></div> <p>Now, whenever you create a new worktree, the hook automatically copies your configuration files, ensuring each worktree has everything it needs to function properly.</p> <h4 id="references">References</h4> <ul> <li><a href="https://mskelton.dev/bytes/using-git-hooks-when-creating-worktrees" rel="external nofollow noopener" target="_blank">Using Git Hooks When Creating Worktrees</a></li> <li><a href="https://git-scm.com/docs/githooks/2.10.5" rel="external nofollow noopener" target="_blank">Git Hooks Documentation</a></li> <li><a href="https://git-scm.com/docs/git-worktree" rel="external nofollow noopener" target="_blank">Git Worktree Documentation</a></li> </ul> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Abubakar Sadiq Ismail. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> </body> </html>